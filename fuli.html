<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>Number Swiper 内嵌示例</title>
<style>
  body {
    margin: 0;
    font-family: sans-serif;
    background: #f5f5f5;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }
  .number-swiper {
    display: flex;
    background: #fff;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    width: 120px; /* 宽度根据列数调整 */
    height: 200px; /* 固定高度 */
    position: relative;
  }
  .number-swiper-column {
    flex: 1;
    list-style: none;
    padding: 0;
    margin: 0;
    text-align: center;
    transform: translateY(0);
    transition: transform 0.2s ease-out;
    cursor: grab;
    user-select: none;
  }
  .number-swiper-column li {
    height: 40px;
    line-height: 40px;
    color: #666;
    font-size: 20px;
  }
  .number-swiper-column li.active {
    color: #000;
    font-weight: bold;
    font-size: 22px;
  }
  /* 中间高亮条 */
  .number-swiper::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    height: 40px;
    border-top: 1px solid #999;
    border-bottom: 1px solid #999;
    transform: translateY(-50%);
    pointer-events: none;
  }
</style>
</head>
<body>

<div class="number-swiper" id="numberSwiper">
  <ol class="number-swiper-column" id="column1">
    <li>0</li><li>1</li><li>2</li><li>3</li><li>4</li>
    <li>5</li><li>6</li><li>7</li><li>8</li><li>9</li>
  </ol>
</div>

<script>
  const column = document.getElementById('column1');
  const items = Array.from(column.querySelectorAll('li'));
  let startY = 0, offsetY = 0, currentIndex = 0;

  function updateActive() {
    items.forEach((el, i) => el.classList.toggle('active', i === currentIndex));
    const value = items[currentIndex].innerText;
    console.log('当前选中：', value);
  }

  column.addEventListener('touchstart', e => {
    startY = e.touches[0].clientY;
  });

  column.addEventListener('touchmove', e => {
    const moveY = e.touches[0].clientY - startY;
    startY = e.touches[0].clientY;
    offsetY += moveY;

    const step = 40; // 每项高度
    currentIndex = Math.round(-offsetY / step);
    currentIndex = Math.max(0, Math.min(items.length - 1, currentIndex));
    offsetY = -currentIndex * step;

    column.style.transform = `translateY(${offsetY}px)`;
    updateActive();
  });

  // 鼠标拖拽也支持
  let isDragging = false;
  column.addEventListener('mousedown', e => {
    isDragging = true;
    startY = e.clientY;
    column.style.cursor = 'grabbing';
  });
  window.addEventListener('mousemove', e => {
    if (!isDragging) return;
    const moveY = e.clientY - startY;
    startY = e.clientY;
    offsetY += moveY;

    const step = 40;
    currentIndex = Math.round(-offsetY / step);
    currentIndex = Math.max(0, Math.min(items.length - 1, currentIndex));
    offsetY = -currentIndex * step;

    column.style.transform = `translateY(${offsetY}px)`;
    updateActive();
  });
  window.addEventListener('mouseup', e => {
    if (!isDragging) return;
    isDragging = false;
    column.style.cursor = 'grab';
  });

  // 初始化
  updateActive();
</script>

</body>
</html>
