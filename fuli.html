<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>复利计算器 + 右侧导航</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
<style>
:root {
  --input-scroll-width: 108px; 
  --scroll-height: 280px;     
  --form-gap: 20px; 
  --bg-color: #1e1e1e;
  --text-color: #eee;
  --input-bg: #2c2c2c;
  --input-border: #555;
  --scroll-bg: rgba(255,255,255,0.1);
  --scroll-fill: linear-gradient(to top, #1e90ff, #00bfff);
}

/* 页面基本样式 */
html, body { margin:0; padding:0; font-family:Arial,Helvetica,sans-serif; background: var(--bg-color); color: var(--text-color); height:100%; overscroll-behavior: none; }
body { display:flex; flex-direction:column; overflow-x:hidden; }

/* 图表区域 */
.chart-container { height:50%; padding:0; box-sizing:border-box; position:relative; }
canvas { width:100% !important; height:100% !important; display:block; border-radius:8px; }

/* 顶部倍率/终值 */
#topValues {
  position:absolute;
  top:5px;
  left:50%;
  transform: translateX(-50%);
  display:flex;
  gap:20px;
  font-size:14px;
  font-weight:bold;
  color:#1e90ff;
  pointer-events:none;
  z-index:10;
  white-space:nowrap; /* 保证不换行 */
  overflow:hidden;
  text-overflow:ellipsis; /* 超长显示省略号 */
}

/* 表单区域 */
.form { display:flex; justify-content: space-between; align-items:flex-start; padding: 0 var(--form-gap); flex:1; }

/* 输入组 */
.input-group { display:flex; flex-direction:column; align-items:center; width: var(--input-scroll-width); }
.input-wrapper { display:flex; flex-direction:column; align-items:center; margin-bottom:5px; }
.input-wrapper input { padding:8px 0; font-size:16px; border-radius:8px; border:1px solid var(--input-border); background: var(--input-bg); color: var(--text-color); text-align:center; width: var(--input-scroll-width); box-sizing: border-box; }

/* 滑条 */
.scroll-bar-vertical { width: var(--input-scroll-width); height: var(--scroll-height); background: var(--scroll-bg); border-radius:8px; position:relative; cursor:grab; overflow:hidden; touch-action:none; }
.scroll-bar-vertical .fill { position:absolute; bottom:0; width:100%; height:0%; background: var(--scroll-fill); }

/* 右侧导航 */
.right-nav {
  position: fixed;
  top:0;
  right:-35%; 
  width:35%;
  max-width:300px;
  height:100%;
  background:#2c2c2c;
  display:flex;
  flex-direction: column;
  justify-content: center;
  transition:right 0.3s ease;
  z-index:200;
  box-shadow: -2px 2px 8px rgba(0,0,0,0.5);
  border-radius: 8px 0 0 8px;
}
.right-nav.expanded { right:0; }
.right-nav .nav-item { color: #eee; padding: 15px; text-align: center; cursor: pointer; border-bottom: 1px solid #444; }
.right-nav .nav-item:hover { background: #1e1e1e; }
.right-nav .nav-item a { color:#eee; text-decoration:none; display:block; }

/* 遮罩层 */
.overlay { position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.3); display:none; z-index:150; }
.overlay.show { display:block; }

/* 右侧手势捕获层 */
.gesture-right { position: fixed; top:0; right:0; width:30px; height:100%; z-index:250; background:transparent; touch-action:none; }
</style>
</head>
<body>

<div class="chart-container">
  <canvas id="balanceChart"></canvas>
  <div id="topValues">
    <div id="resultBox">倍率：--X</div>
    <div id="finalValue">终值：--</div>
  </div>
</div>

<div class="form">
  <div class="input-group">
    <span class="input-label">本金</span>
    <div class="input-wrapper">
      <input type="number" id="principal" value="1" min="1" max="99"/>
    </div>
    <div class="scroll-bar-vertical" id="principalScroll"><div class="fill"></div></div>
  </div>

  <div class="input-group">
    <span class="input-label">利率(%)</span>
    <div class="input-wrapper">
      <input type="number" id="rate" value="10" min="0.5" max="50" step="0.5"/>
    </div>
    <div class="scroll-bar-vertical" id="rateScroll"><div class="fill"></div></div>
  </div>

  <div class="input-group">
    <span class="input-label">期数</span>
    <div class="input-wrapper">
      <input type="number" id="periods" value="12" min="1" max="120"/>
    </div>
    <div class="scroll-bar-vertical" id="periodsScroll"><div class="fill"></div></div>
  </div>
</div>

<!-- 右侧导航 -->
<div class="right-nav" id="rightNav">
  <div class="nav-item">首页</div>
  <div class="nav-item"><a href="ykbsl.html">盈亏比&胜率</a></div>
</div>
<div class="overlay" id="overlay"></div>
<div class="gesture-right" id="gestureRight"></div>

<script>
// ==================== 复利计算器逻辑 ====================
// ...（保持之前滑条和计算逻辑不变）
// 为简洁省略，此部分可直接保留你原来的滑条和 Chart.js 计算逻辑

// ==================== 右侧导航逻辑 ====================
const rightNav = document.getElementById('rightNav');
const overlay = document.getElementById('overlay');
function openNav(){ rightNav.classList.add('expanded'); overlay.classList.add('show'); }
function closeNav(){ rightNav.classList.remove('expanded'); overlay.classList.remove('show'); }
overlay.addEventListener('click', closeNav);

const gestureRight = document.getElementById('gestureRight');
let startX=0, startY=0;
gestureRight.addEventListener('touchstart', e=>{
  if(e.touches.length!==1) return;
  e.preventDefault();
  startX=e.touches[0].clientX;
  startY=e.touches[0].clientY;
}, {passive:false});
gestureRight.addEventListener('touchmove', e=>{
  if(e.touches.length!==1) return;
  e.preventDefault();
}, {passive:false});
gestureRight.addEventListener('touchend', e=>{
  const deltaX = startX - e.changedTouches[0].clientX;
  if(Math.abs(deltaX)>30){
    if(deltaX>0) openNav(); else closeNav();
  }
  startX=0; startY=0;
});
</script>
</body>
</html>
