<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>仿 iOS 3D 滚轮选择器</title>
<style>
/* ---------------- popoPicker 样式核心 ---------------- */
* { margin: 0; padding: 0; box-sizing: border-box; }
body, html { width: 100%; height: 100%; font-family: Arial, sans-serif; background: #f5f5f5; display: flex; justify-content: center; align-items: center; }

.picker-container {
  perspective: 1000px;
  width: 200px;
  height: 200px;
  overflow: hidden;
  position: relative;
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.2);
}

.picker-wheel {
  list-style: none;
  padding: 0;
  margin: 0;
  position: absolute;
  width: 100%;
  height: 100%;
  top: 50%;
  transform-style: preserve-3d;
  transform: translateY(-50%);
  transition: transform 0.2s cubic-bezier(.25,.1,.25,1);
}

.picker-wheel li {
  text-align: center;
  height: 40px;
  line-height: 40px;
  font-size: 18px;
  color: #888;
  position: absolute;
  width: 100%;
  left: 0;
  top: 50%;
  transform-origin: center -80px;
}

.picker-wheel li.active {
  color: #000;
  font-weight: bold;
  font-size: 20px;
}

.picker-highlight {
  position: absolute;
  top: 50%;
  left: 0;
  width: 100%;
  height: 40px;
  margin-top: -20px;
  border-top: 1px solid #ccc;
  border-bottom: 1px solid #ccc;
  pointer-events: none;
}

/* ---------------- end 样式 ---------------- */
</style>
</head>
<body>

<div class="picker-container">
  <ul class="picker-wheel" id="pickerWheel">
    <!-- 选项会通过 JS 渲染 -->
  </ul>
  <div class="picker-highlight"></div>
</div>

<script>
/* ---------------- popoPicker 核心逻辑模拟 ---------------- */
const data = [
  '选项一','选项二','选项三','选项四','选项五','选项六','选项七'
];

const wheel = document.getElementById('pickerWheel');
const itemHeight = 40;      // 每个选项高度
const radius = 80;          // 滚轮半径
let selectedIndex = 0;

// 渲染滚轮
function renderWheel() {
  wheel.innerHTML = '';
  data.forEach((text, i) => {
    const li = document.createElement('li');
    li.textContent = text;
    const angle = (i - selectedIndex) * 25; // 每项间隔角度
    li.style.transform = `rotateX(${angle}deg) translateZ(${radius}px)`;
    if(i === selectedIndex) li.classList.add('active');
    wheel.appendChild(li);
  });
}

// 滑动逻辑
let startY, currentY, isDragging = false;
wheel.addEventListener('mousedown', e => {
  isDragging = true;
  startY = e.clientY;
});
wheel.addEventListener('mousemove', e => {
  if(!isDragging) return;
  currentY = e.clientY;
  const diff = startY - currentY;
  if(Math.abs(diff) > itemHeight/2) {
    if(diff > 0 && selectedIndex < data.length - 1) selectedIndex++;
    if(diff < 0 && selectedIndex > 0) selectedIndex--;
    startY = currentY;
    renderWheel();
  }
});
window.addEventListener('mouseup', e => { isDragging = false; });

// 初始渲染
renderWheel();
</script>

</body>
</html>
