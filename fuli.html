<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>内嵌滚轮选择器 - BetterScroll</title>
<link rel="stylesheet" href="https://unpkg.com/better-scroll@2.4.2/dist/bscroll.min.css">
<style>
  body {
    font-family: sans-serif;
    text-align: center;
    margin: 50px;
  }
  h2 {
    margin-bottom: 20px;
  }

  .picker-container {
    display: flex;
    justify-content: center;
    gap: 20px;
  }

  .wheel-wrapper {
    width: 100px;
    height: 180px;
    overflow: hidden;
    border: 1px solid #ddd;
    border-radius: 8px;
    position: relative;
  }

  .wheel-wrapper .wheel-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .wheel-wrapper .wheel-list li {
    height: 40px;
    line-height: 40px;
    color: #999;
    font-size: 16px;
  }

  /* 中间高亮条 */
  .wheel-wrapper::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 0;
    width: 100%;
    height: 40px;
    margin-top: -20px;
    border-top: 2px solid #007bff;
    border-bottom: 2px solid #007bff;
    pointer-events: none;
  }

  /* 高亮选中样式 */
  .wheel-list li.selected {
    color: #007bff;
    font-weight: bold;
    font-size: 20px;
  }

  .percentage-display {
    margin-top: 30px;
    font-size: 18px;
  }
</style>
</head>
<body>

<h2>总仓位 & 盈亏滚轮</h2>
<div class="picker-container">
  <div class="wheel-wrapper" id="position-wheel">
    <ul class="wheel-list" id="position-list"></ul>
  </div>
  <div class="wheel-wrapper" id="profit-wheel">
    <ul class="wheel-list" id="profit-list"></ul>
  </div>
</div>

<p class="percentage-display">当前百分比: <strong id="percentage">0</strong>%</p>

<script src="https://unpkg.com/better-scroll@2.4.2/dist/bscroll.min.js"></script>
<script>
  // 数据
  const positions = ['1/1','1/2','1/3','1/4','1/5','1/6','1/7','1/8','1/9','1/10'];
  const profits = Array.from({length:20},(_,i) => ((i+1)*0.5).toFixed(1));

  const positionList = document.getElementById('position-list');
  const profitList = document.getElementById('profit-list');
  const percentageEl = document.getElementById('percentage');

  positions.forEach(p => {
    const li = document.createElement('li');
    li.textContent = p;
    positionList.appendChild(li);
  });

  profits.forEach(p => {
    const li = document.createElement('li');
    li.textContent = p + '%';
    profitList.appendChild(li);
  });

  // 初始化 BetterScroll
  const positionBS = new BScroll('#position-wheel', {
    wheel: {
      selectedIndex: 0,
      wheelWrapperClass: 'wheel-list',
      wheelItemClass: 'wheel-list li'
    },
    probeType: 3
  });

  const profitBS = new BScroll('#profit-wheel', {
    wheel: {
      selectedIndex: 0,
      wheelWrapperClass: 'wheel-list',
      wheelItemClass: 'wheel-list li'
    },
    probeType: 3
  });

  // 更新高亮和百分比
  function updateSelected() {
    const posIndex = positionBS.getSelectedIndex();
    const profIndex = profitBS.getSelectedIndex();

    // 高亮
    document.querySelectorAll('#position-list li').forEach((li,i) => li.classList.toggle('selected', i===posIndex));
    document.querySelectorAll('#profit-list li').forEach((li,i) => li.classList.toggle('selected', i===profIndex));

    // 计算百分比
    const posValue = eval(positions[posIndex]);
    const profValue = parseFloat(profits[profIndex]);
    percentageEl.textContent = (posValue * profValue).toFixed(2);
  }

  // 监听滚动结束
  positionBS.on('scrollEnd', updateSelected);
  profitBS.on('scrollEnd', updateSelected);

  // 初始化一次
  updateSelected();
</script>
</body>
</html>
