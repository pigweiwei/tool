<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>iOS 风格滚动选择器</title>
<style>
  body {
    margin: 0;
    font-family: sans-serif;
    display: flex;
    height: 100vh;
    align-items: center;
    justify-content: center;
    background: #f0f0f0;
    overflow: hidden; /* 禁止页面滚动 */
  }

  .picker-container {
    perspective: 1000px;
    width: 200px;
    height: 200px;
    overflow: hidden;
    position: relative;
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  }

  .picker-list {
    position: absolute;
    top: 50%;
    left: 0;
    width: 100%;
    transform-style: preserve-3d;
    transform: translateY(-50%);
    transition: transform 0.2s ease-out;
  }

  .picker-item {
    height: 40px;
    line-height: 40px;
    text-align: center;
    font-size: 18px;
    color: #666;
    backface-visibility: hidden;
  }

  .picker-item.selected {
    color: #000;
    font-weight: bold;
  }

  .picker-mask {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(to bottom, rgba(240,240,240,1) 0%, rgba(240,240,240,0) 30%, rgba(240,240,240,0) 70%, rgba(240,240,240,1) 100%);
    pointer-events: none;
  }

  .picker-center-line {
    position: absolute;
    top: 50%;
    left: 0;
    width: 100%;
    height: 40px;
    margin-top: -20px;
    border-top: 1px solid #ccc;
    border-bottom: 1px solid #ccc;
    pointer-events: none;
  }
</style>
</head>
<body>

<div class="picker-container">
  <div class="picker-list" id="pickerList"></div>
  <div class="picker-mask"></div>
  <div class="picker-center-line"></div>
</div>

<script>
  const items = ["苹果", "香蕉", "橙子", "西瓜", "葡萄", "菠萝", "草莓", "芒果", "樱桃", "梨"];
  const itemHeight = 40;
  const visibleCount = 5;
  const pickerList = document.getElementById('pickerList');

  // 填充列表
  items.forEach(text => {
    const div = document.createElement('div');
    div.className = 'picker-item';
    div.innerText = text;
    pickerList.appendChild(div);
  });

  let currentIndex = 0;
  const totalItems = items.length;

  function updatePicker() {
    const offset = -currentIndex * itemHeight;
    pickerList.style.transform = `translateY(calc(50% - ${itemHeight/2}px)) translateY(${offset}px)`;
    document.querySelectorAll('.picker-item').forEach((el, idx) => {
      el.classList.toggle('selected', idx === currentIndex);
    });
  }

  updatePicker();

  // 阻止滚动穿透页面
  function preventScroll(e) {
    e.preventDefault();
  }

  pickerList.addEventListener('wheel', preventScroll, {passive: false});

  // 鼠标拖动 / 触摸滑动
  let startY = 0;
  let isDragging = false;

  function startDrag(e) {
    isDragging = true;
    startY = e.touches ? e.touches[0].clientY : e.clientY;
  }

  function moveDrag(e) {
    if(!isDragging) return;
    const y = e.touches ? e.touches[0].clientY : e.clientY;
    const delta = y - startY;
    if(Math.abs(delta) >= itemHeight) {
      const step = Math.floor(delta / itemHeight);
      currentIndex -= step;
      if(currentIndex < 0) currentIndex = 0;
      if(currentIndex >= totalItems) currentIndex = totalItems -1;
      startY = y;
      updatePicker();
    }
  }

  function endDrag() {
    isDragging = false;
  }

  pickerList.addEventListener('mousedown', startDrag);
  pickerList.addEventListener('mousemove', moveDrag);
  pickerList.addEventListener('mouseup', endDrag);
  pickerList.addEventListener('mouseleave', endDrag);
  pickerList.addEventListener('touchstart', startDrag);
  pickerList.addEventListener('touchmove', moveDrag, {passive: false});
  pickerList.addEventListener('touchend', endDrag);

</script>
</body>
</html>
