<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>仓位计算器</title>
<style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  width: 100%;
  background: #1a1a1a;
  font-family: Arial, sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  color: white;
}
.container {
  text-align: center;
}
.chart {
  position: relative;
  width: 300px;
  height: 400px;
  border-left: 2px solid #888;
  border-bottom: 2px solid #888;
  margin: 20px auto;
}
.bar {
  position: absolute;
  bottom: 0;
  left: 100px;
  width: 60px;
  background: #4caf50;
  transition: height 0.3s;
}
.labels {
  position: absolute;
  left: 20px;
  bottom: 0;
  display: flex;
  flex-direction: column-reverse;
  height: 100%;
  justify-content: space-between;
  font-size: 14px;
}
.labels span {
  margin-bottom: 5px;
}
.input-area {
  margin-top: 20px;
}
input {
  width: 80px;
  padding: 5px;
  margin: 5px;
  font-size: 16px;
}
</style>
</head>
<body>
<div class="container">
  <h2>仓位计算器</h2>
  <div class="chart">
    <div class="labels">
      <span>1</span>
      <span>1/2</span>
      <span>1/3</span>
      <span>1/4</span>
      <span>1/5</span>
      <span>1/6</span>
      <span>1/7</span>
      <span>1/8</span>
      <span>1/9</span>
      <span>1/10</span>
      <span>0</span>
    </div>
    <div class="bar" id="bar"></div>
  </div>
  <div class="input-area">
    <label>盈亏比: <input type="number" id="ratio" value="2" step="0.1"></label>
    <label>胜率: <input type="number" id="winrate" value="50" step="1"></label>
  </div>
  <div>
    <p id="result">仓位: 0</p>
  </div>
</div>
<script>
function calculatePosition(ratio, winrate) {
  const r = parseFloat(ratio);
  const w = parseFloat(winrate) / 100;
  if (r <= 0 || w < 0 || w > 1) return 0;
  const pos = (w - (1 - w) / r);
  return Math.max(0, pos);
}

function update() {
  const ratio = document.getElementById('ratio').value;
  const winrate = document.getElementById('winrate').value;
  const position = calculatePosition(ratio, winrate);

  const bar = document.getElementById('bar');
  bar.style.height = (position * 400) + 'px';

  document.getElementById('result').innerText = "仓位: " + position.toFixed(2);
}

document.getElementById('ratio').addEventListener('input', update);
document.getElementById('winrate').addEventListener('input', update);

update();
</script>
</body>
</html>
