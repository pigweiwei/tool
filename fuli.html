<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>右侧抽屉导航 - 右滑打开</title>
<style>
  body {
    margin: 0;
    height: 200vh;
    background: #f5f5f5;
    font-family: Arial, sans-serif;
  }

  /* 右侧导航 */
  .right-nav {
    position: fixed;
    top: 0;
    right: -70%; /* 默认隐藏，宽度用百分比自适应 */
    width: 70%;
    max-width: 300px;
    height: 100%;
    background: #2c2c2c;
    border-radius: 8px 0 0 8px;
    display: flex;
    flex-direction: column;
    transition: right 0.3s ease;
    z-index: 200;
    box-shadow: -2px 2px 8px rgba(0,0,0,0.5);
  }

  .right-nav.expanded {
    right: 0;
  }

  /* 遮罩层 */
  .overlay {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.3);
    display: none;
    z-index: 150;
  }
  .overlay.show { display: block; }

  /* 导航项 */
  .right-nav .nav-item {
    color: #eee;
    padding: 15px;
    text-align: center;
    cursor: pointer;
    border-bottom: 1px solid #444;
    transition: all 0.3s;
  }
  .right-nav .nav-item:hover { background: #1e1e1e; }

  /* 悬浮按钮 */
  .nav-toggle {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 50px;
    height: 50px;
    border-radius: 25px;
    background: #2c2c2c;
    color: #1e90ff;
    font-size: 24px;
    font-weight: bold;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 250;
    box-shadow: 0 2px 8px rgba(0,0,0,0.4);
  }
</style>
</head>
<body>

<div class="overlay" id="overlay"></div>

<div class="right-nav" id="rightNav">
  <div class="nav-item">首页</div>
  <div class="nav-item">设置</div>
  <div class="nav-item">帮助</div>
</div>

<div class="nav-toggle" id="navToggle">☰</div>

<script>
  const rightNav = document.getElementById("rightNav");
  const navToggle = document.getElementById("navToggle");
  const overlay = document.getElementById("overlay");

  function openNav() {
    rightNav.classList.add("expanded");
    overlay.classList.add("show");
  }

  function closeNav() {
    rightNav.classList.remove("expanded");
    overlay.classList.remove("show");
  }

  function toggleNav() {
    if (rightNav.classList.contains("expanded")) closeNav();
    else openNav();
  }

  // 点击按钮
  navToggle.addEventListener("click", toggleNav);

  // 点击遮罩层
  overlay.addEventListener("click", closeNav);

  // ================= 手机端右滑/左滑手势控制 =================
  let touchStartX = 0;
  let touchEndX = 0;

  document.addEventListener("touchstart", e => {
    touchStartX = e.changedTouches[0].screenX;
  }, { passive: true });

  document.addEventListener("touchend", e => {
    touchEndX = e.changedTouches[0].screenX;
    handleGesture();
  }, { passive: true });

  function handleGesture() {
    const threshold = 50;
    if (touchEndX - touchStartX > threshold) {
      // 右滑打开导航
      openNav();
    }
    if (touchStartX - touchEndX > threshold) {
      // 左滑关闭导航
      closeNav();
    }
  }
</script>
</body>
</html>
